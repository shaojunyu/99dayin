define(["jquery"],function(e){var t={getToken:"../index.php/api/getUploadToken",getOfficial:"",pay:"",search:"",logout:"../index.php/api/logout",confirm:"../index.php/api/uploadACK",remove:"../index.php/api/deleteCartItem"},n={$username:e(".login-account"),$ps:e(".login-ps"),$iden:e(".login-choice>div.active"),title:e(".title-btn"),detail:e(".detail-btn"),print_btn:e(".print-btn"),getText:function(e){return e.val()},getIden:function(){var e=this.$iden;return e.hasClass("user-login")?0:1},linkSuccess:function(e){e.success},afterLogin:function(e){this.print_btn.attr("href",t.upload),this.title.html('<a class="name">'+e+"/a>")},beforeLogin:function(){this.print_btn.attr("href","javascript:void(0)"),this.title.html('<span class="login" id="login" data-content="登录">登录</span><span>|</span><span class="signin" id="signin" data-content="注册">注册</span>')},init:function(){var n=this;e(".login-btn").on("click",function(){var e=n.getText(n.$username),r=n.getText(n.$ps),i=n.getIden();sendAjax({url:t.login,dataType:"json",data:{username:e,ps:r,iden:i},success:function(e){e.success?window.location.href="./":prompt.changeInfo(e.msg)}})}),e(".QQ-login").on("click",function(){sendAjax({url:t.Linklogin,data:{login_method:"QQ"},success:n.linkSuccess})}),this.title.on("click",function(t){var r=e(t.target);r.hasClass("name")?toggleShow(n.detail):r.hasClass("login")?detectShow(login_frame,!0):r.hasClass("signin")&&detectShow(signin_frame,!1)}),this.detail.on("click",function(n){var r=e(n.target);r.hasClass("logout")&&sendAjax({url:t.logout,success:function(e){e.success&&(window.location.href="/")}})}),this.print_btn.on("click",function(){e(this).attr("data-log")==0&&detectShow(login_frame,!0)})}};n.init()});