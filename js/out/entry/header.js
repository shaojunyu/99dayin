define(["jquery","encryption"],function(e,t){var n={login:t.Encryption("/99dayin/index.php/api/login"),sigin:t.Encryption("/99dayin/index.php/api/signup"),Linklogin:"",username:t.Encryption("/99dayin/index.php/api/verifySmsCode"),CF_url:t.Encryption("/99dayin/index.php/api/sendSmsCode"),upload:"",logout:t.Encryption("/99dayin/index.php/api/logout")},r={$username:e(".login-account"),$ps:e(".login-ps"),$iden:e(".login-choice>div.active"),title:e(".title-btn"),detail:e(".detail-btn"),print_btn:e(".print-btn"),getText:function(t){return t.val()},getIden:function(){var t=this.$iden;return t.hasClass("user-login")?0:1},linkSuccess:function(t){t.success},afterLogin:function(t){this.print_btn.attr("href",n.upload),this.title.html('<a class="name">'+t+"/a>")},beforeLogin:function(){this.print_btn.attr("href","javascript:void(0)"),this.title.html('<span class="login" id="login" data-content="登录">登录</span><span>|</span><span class="signin" id="signin" data-content="注册">注册</span>')},init:function(){var r=this;e(".login-btn").on("click",function(){var e=r.getText(r.$username),t=r.getText(r.$ps),i=r.getIden();sendAjax({url:n.login,dataType:"json",data:{username:e,ps:t,iden:i},success:function(t){t.success?window.location.href="./":prompt.changeInfo(t.msg)}})}),e(".QQ-login").on("click",function(){sendAjax({url:n.Linklogin,data:{login_method:"QQ"},success:r.linkSuccess})}),this.title.on("click",function(t){var n=e(t.target);n.hasClass("name")?toggleShow(r.detail):n.hasClass("login")?detectShow(login_frame,!0):n.hasClass("signin")&&detectShow(signin_frame,!1)}),this.detail.on("click",function(t){var r=e(t.target);r.hasClass("logout")&&sendAjax({url:n.logout,success:function(t){t.success&&(window.location.href="/")}})}),this.print_btn.on("click",function(){e(this).attr("data-log")==0&&detectShow(login_frame,!0)})}};r.init()});